<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Flash Card Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pptxgen@3.12.0/dist/pptxgen.min.js"></script>
<script>
  // Fallback if the first CDN fails
  if (typeof PptxGenJS === 'undefined') {
    const script = document.createElement('script');
    script.src = 'https://unpkg.com/pptxgen@3.12.0/dist/pptxgen.min.js';
    document.head.appendChild(script);
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.11.0/dist/pptxgen.bundle.js"></script>
<script src="https://backend.canpaniongroup.com/public/flashcard/books.js"></script>
<link rel="stylesheet" href="https://backend.canpaniongroup.com/public/flashcard/flashcards.css">

</head>
<body>
  <div class="container">
    <div class="header">
      <h1 id="pageTitle">Flash Card Generator</h1>
      <p id="pageSubtitle">Create interactive flashcards with multiple learning modes</p>
    </div>

    <div class="content">
      <!-- Mode Selection -->
      <div class="section">
        <h3><span id="selectModeTitle">ğŸ® Select Flashcard Mode</span></h3>
        <div class="mode-selector">
          <div class="mode-card" data-mode="definition">
            <div class="mode-icon">ğŸ“š</div>
            <h4 id="definitionModeTitle">Definition Mode</h4>
            <p id="definitionModeDesc">Term on front, definition on back. Perfect for vocabulary and concepts.</p>
          </div>
          <div class="mode-card" data-mode="translation">
            <div class="mode-icon">ğŸŒ</div>
            <h4 id="translationModeTitle">Translation Mode</h4>
            <p id="translationModeDesc">Word in one language on front, translation on back.</p>
          </div>
          <div class="mode-card" data-mode="multiple-choice">
            <div class="mode-icon">â“</div>
            <h4 id="multipleChoiceModeTitle">Multiple Choice</h4>
            <p id="multipleChoiceModeDesc">Question on front, multiple choice options with correct answer on back.</p>
          </div>
          <div class="mode-card" data-mode="fill-blank">
            <div class="mode-icon">âœï¸</div>
            <h4 id="fillBlankModeTitle">Fill in the Blank</h4>
            <p id="fillBlankModeDesc">Incomplete sentence on front, missing word on back.</p>
          </div>
          <div class="mode-card" data-mode="image-based">
            <div class="mode-icon">ğŸ–¼ï¸</div>
            <h4 id="imageBasedModeTitle">Image-Based</h4>
            <p id="imageBasedModeDesc">Image on front, description or name on back.</p>
          </div>
        </div>
      </div>

      <!-- Content Source -->
      <div class="section">
        <h3><span id="contentSourceTitle">ğŸ“„ Content Source</span></h3>
        <div class="form-group">
          <label>
            <input type="radio" name="contentSource" value="upload" checked /> 
            <span id="uploadMaterialsLabel">Upload Materials (PDF/DOC/TXT)</span>
          </label>
          <div id="uploadSection">
            <div class="file-upload-area" id="fileUploadArea">
              <p id="dragDropFilesText">ğŸ“ Drag and drop files here or click to browse</p>
              <input type="file" id="fileInput" multiple accept=".pdf,.doc,.docx,.txt" style="display: none;" />
            </div>
            <div id="fileList" class="file-list"></div>
          </div>
        </div>

        <div class="form-group">
          <label>
            <input type="radio" name="contentSource" value="database" /> 
            <span id="useDatabaseLabel">Use Pre-loaded Database (HK/CN)</span>
          </label>
          <div id="databaseSection" style="display: none;">
            <div class="book-list" id="bookList"></div>
            <div class="selected-books" id="selectedBooks">
              <h4><span id="selectedBooksTitle">Selected Books:</span></h4>
              <div id="selectedBooksList"></div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>
            <input type="radio" name="contentSource" value="manual" /> 
            <span id="typeManuallyLabel">Type Content Manually</span>
          </label>
          <div id="manualSection" style="display: none;">
            <textarea id="manualContent" placeholder="Enter your content here..."></textarea>
          </div>
        </div>

        <!-- Image Upload for Image-Based Mode -->
        <div class="form-group" id="imageUploadSection" style="display: none;">
          <label>
            <input type="radio" name="contentSource" value="images" /> 
            <span id="uploadImagesLabel">Upload Images for Image-Based Mode</span>
          </label>
          <div id="imageUploadArea" style="display: none;">
            <div class="file-upload-area">
              <p id="dragDropImagesText">ğŸ–¼ï¸ Drag and drop image files here or click to browse</p>
              <input type="file" id="imageInput" multiple accept="image/*" style="display: none;" />
            </div>
            <div id="imageList" class="file-list"></div>
          </div>
        </div>
      </div>

      <!-- Parameters -->
      <div class="section">
        <h3><span id="parametersTitle">âš™ï¸ Parameters</span></h3>
        <div class="form-group">
          <label for="duration" id="durationLabel">Duration:</label>
          <input type="text" id="duration" placeholder="e.g. 45 mins" />
        </div>

        <div class="form-group">
          <label for="grade" id="gradeLabel">Grade:</label>
          <input type="text" id="grade" placeholder="e.g. Grade 3" />
        </div>

        <div class="form-group">
          <label id="difficultyLabel">Difficulty:</label>
          <div class="radio-group">
            <label><input type="radio" name="difficulty" value="High" /> <span id="difficultyHigh">High</span></label>
            <label><input type="radio" name="difficulty" value="Mid" checked /> <span id="difficultyMid">Mid</span></label>
            <label><input type="radio" name="difficulty" value="Low" /> <span id="difficultyLow">Low</span></label>
          </div>
        </div>

        <div class="form-group">
          <label for="topic" id="topicLabel">Topic:</label>
          <input type="text" id="topic" placeholder="Enter topic..." />
        </div>

        <!-- Translation Language Selection -->
        <div class="form-group" id="translationOptions" style="display: none;">
          <label id="translationSettingsLabel">Translation Settings:</label>
          <div class="translation-controls">
            <div class="language-selector">
              <label for="fromLanguage" id="fromLanguageLabel">From Language:</label>
              <select id="fromLanguage">
                <option value="English">English</option>
                <option value="Simplified Chinese">Simplified Chinese (ç®€ä½“ä¸­æ–‡)</option>
                <option value="Traditional Chinese">Traditional Chinese (ç¹é«”ä¸­æ–‡)</option>
                <option value="Spanish">Spanish (EspaÃ±ol)</option>
                <option value="French">French (FranÃ§ais)</option>
                <option value="German">German (Deutsch)</option>
                <option value="Japanese">Japanese (æ—¥æœ¬èª)</option>
                <option value="Korean">Korean (í•œêµ­ì–´)</option>
                <option value="Italian">Italian (Italiano)</option>
                <option value="Portuguese">Portuguese (PortuguÃªs)</option>
                <option value="Russian">Russian (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
                <option value="Arabic">Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                <option value="Hindi">Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
              </select>
            </div>
            <div class="language-arrow">â†’</div>
            <div class="language-selector">
              <label for="toLanguage" id="toLanguageLabel">To Language:</label>
              <select id="toLanguage">
                <option value="Simplified Chinese" selected>Simplified Chinese (ç®€ä½“ä¸­æ–‡)</option>
                <option value="Traditional Chinese">Traditional Chinese (ç¹é«”ä¸­æ–‡)</option>
                <option value="English">English</option>
                <option value="Spanish">Spanish (EspaÃ±ol)</option>
                <option value="French">French (FranÃ§ais)</option>
                <option value="German">German (Deutsch)</option>
                <option value="Japanese">Japanese (æ—¥æœ¬èª)</option>
                <option value="Korean">Korean (í•œêµ­ì–´)</option>
                <option value="Italian">Italian (Italiano)</option>
                <option value="Portuguese">Portuguese (PortuguÃªs)</option>
                <option value="Russian">Russian (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
                <option value="Arabic">Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                <option value="Hindi">Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="cardCount" id="cardCountLabel">Number of Flashcards:</label>
          <input type="number" id="cardCount" value="10" min="1" max="50" />
        </div>
      </div>

      <button class="btn btn-primary" onclick="generateFlashCards()" id="generateButton">âœ¨ Generate Flash Cards</button>

      <!-- Flashcard Display -->
      <div class="flashcard-container" id="flashcardContainer">
        <div class="flashcard" id="flashcard" onclick="flipCard()">
          <div class="flashcard-inner">
            <div class="flashcard-front" id="cardFront">
              Click to start
            </div>
            <div class="flashcard-back" id="cardBack">
              Back content
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="flashcard-controls">
          <div class="flashcard-nav">
            <button class="btn btn-secondary" onclick="previousCard()" id="prevButton">â† Previous</button>
            <div class="flashcard-counter" id="cardCounter">1 / 10</div>
            <button class="btn btn-secondary" onclick="nextCard()" id="nextButton">Next â†’</button>
          </div>
          <div class="button-row">
            <button class="btn btn-success" onclick="markAsCorrect()" id="correctButton">âœ… Correct</button>
            <button class="btn btn-secondary" onclick="markAsIncorrect()" id="incorrectButton">âŒ Incorrect</button>
            <button class="btn btn-primary" onclick="shuffleCards()" id="shuffleButton">ğŸ”€ Shuffle</button>
          </div>
        </div>
      </div>

      <!-- Result Section -->
      <div class="result-section" id="resultSection">
        <h3 id="generatedContentTitle">ğŸ“„ Generated Content</h3>
        <div class="result-content" id="result"></div>
        <div class="button-row">
          <button class="btn btn-secondary" onclick="amendContent()" id="amendButton">ğŸ“ Amend</button>
          <button class="btn btn-success" onclick="downloadFile('word')" id="exportWordButton">ğŸ“„ Export to Word</button>
          <button class="btn btn-success" onclick="downloadFile('ppt')" id="exportPPTButton">ğŸ“Š Export to PPT</button>
          <button class="btn btn-primary" onclick="startFlashcardMode()" id="startStudyButton">ğŸ¯ Start Flashcard Mode</button>
        </div>
      </div>
    </div>
  </div>

  <script src="./flashcards.js"></script>
</body>
</html>
